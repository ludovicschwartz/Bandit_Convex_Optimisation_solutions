\documentclass[a4paper, 11pt]{report}

\usepackage{preamble}
\usepackage[top=2cm, bottom=2cm, left=2cm, right=2cm]{geometry}

\usepackage{subcaption}
\usepackage{multicol}
	\setlength{\columnseprule}{0.1pt}

\usepackage{setspace}

\usepackage{pgffor}
\usepackage{subfiles}

\input{macros}

\newcounter{exercise}[chapter]
\newenvironment{exercise}[2][]{\refstepcounter{exercise}\ifthenelse{\equal{#1}{}}{\noindent\vspace{0.5cm}{\textbf{Exercise \thechapter.\theexercise} \textsc{#2}\\}\addcontentsline{toc}{section}{Exercise \theexercise. #2}}{} }{}
\providecommand{\soldone}{}
\newenvironment{solution}[1][]{\renewcommand{\soldone}{\equal{#1}{}}\ifthenelse{\soldone}{\par\vspace{0.4cm}\noindent{\bfseries Solution : }}{}}{\ifthenelse{\soldone}{\hfill $\whitesquaregamma$ \par\vspace{0.4cm}}{}}
\newcommand\TwoDigits[1]{%
   \ifnum#1<10 0#1\else #1\fi
}

\newcommand*{\MaxNumOfChapters}{40}
\providecommand{\main}{.}
\title{
\begin{Huge}
Bandit Convex Optimisation -- Exercise Solutions
\end{Huge}
}
\author{Ludovic Schwartz, Baptiste Abeles}
\date{}

\setlength{\parskip}{.3em}

\begin{document}

\maketitle
\clearpage

\begin{small}
\tableofcontents
\end{small}

\foreach \c in {1,2,...,\MaxNumOfChapters}{%
    \edef\FileName{chapter_\TwoDigits{\c}/main}
    \IfFileExists{\FileName} {%
        \subfile{\FileName}%
    }{%
         % files does not exist, so nothing to do
    }%
}%

\clearpage
% \nocite{*}
% \bibliography{ref}

\end{document}
